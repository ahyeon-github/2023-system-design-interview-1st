## 개략적인 규모 추정

> 시스템 용량, 성능 요구 사항을 계략적으로 추청해보고 어떤 설계가 요구사항에 부합할 것인지 판단해보자. 

### 2의 제곱수

데이터 볼륨의 최소 단위는 1바이트이고, 8비트로 구성된다.<br>
ASCII 문자 하나가 차지하는 메모리 크기가 1바이트이다.<br>


### 모든 프로그래머가 알아야 하는 응답지연 값

- 구글의 제프 딘이 2010년에 통상적은 컴퓨터에서 구현된 연산들의 응답지연 값을 공개한 바가 있다. 
- 이를 구글의 한 엔지니어가 컴퓨터 연산들의 처리 속도가 어느 정도인지 짐작하기 쉽도록 수치를 시각화하였다. 

수치들을 분석한 결론은 다음과 같다. 
- 메모리는 빠르지만 디스크는 아직 느리다.
- 디스크 탐색은 가능한 한 피하라.
- 단순한 압축 알고리즘은 빠르다.
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라.
- 데이터 센터는 보통 여러 지역에 분산되어 있고, 센터들 간에 - 데이터를 주고받는 데는 시간이 걸린다.


### 가용성에 관계된 수치들

고가용성: 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력 
- 100%는 시스템이 단 한 번도 중단된 적 없었음을 의미한다. 
- 대부분의 서비스는 99%에서 100% 사이의 값을 갖는다
- Amazon, Google, Microsoft 같은 사업자는 99% 이상의 가용률을 약속한다. 


### 예제: 트위터 QPS와 저장소 요구량 추정

#### 가정
- 월간 능동 사용자는 3억 명이다.
- 50%의 사용자가 트위터를 매일 사용한다.
- 평균적으로 각 사용자는 매일 2건의 트윗을 올린다.
- 미디어를 포함하는 트윗은 10% 정도다.
- 데이터는 5년간 보관한다.

#### 추정
QPS(Query Per Second) 추정치 : 초당 처리할 수 있는 쿼리 수
- 일간 능동 사용자 = 3억 x 50% = 1.5억
- QPS = 1.5억 x 2 트윗 / 24시간 / 3600초 = 약 3500개
- 최대 QPS = 2 x QPS = 약 7000개

미디어 저장을 위한 저장소 요구량
- 평균 트윗 크기
    - tweet_id에 64바이트
    - 텍스트에 140바이트
    - 미디어에 1MB
- 미디어 저장소 요구량 : 1.5억 x 2 x 10 % x 1MB = 30TB/ 일
- 5년간 미디어를 보관하기 위한 저장소 요구량: 30TB x 365 x 5 = 약 55PB


### 면접장 팁
- 근사치를 활용하여 계산하라
- 가정을 적어 두고 나중에 살펴보라
- 단위를 붙이라
- QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 추정하는 문제가 많이 출제되니 미리 연습해보자 